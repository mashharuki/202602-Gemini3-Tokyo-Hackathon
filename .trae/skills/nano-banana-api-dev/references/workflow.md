# Nano banana アプリ開発ワークフロー

## 1. スコープ定義
- ユースケースを3種に分ける: generate / edit / iterative edit。
- 成果物の保存形式（PNG/JPEG）と保管先を決める。
- 同期APIか非同期ジョブかを選定する。

## 2. I/O設計
- 入力: `prompt`, `image(optional)`, `mimeType`, `session(optional)`。
- 出力: `images[]`, `assistantText`, `usageMeta`, `errorCode`。
- サイズ制約をリクエスト前に検証する。

## 3. 実装順序
1. テキストのみ生成エンドポイントを作る。
2. 画像入力編集エンドポイントを追加する。
3. マルチターン会話セッションを追加する。
4. 保存処理（S3/GCS/ローカル）を実装する。

## 4. 品質保証
- 受け入れテストに「同一入力での再現傾向」を含める。
- 障害注入テストでAPIエラー時UXを確認する。
- 長いプロンプトと複数画像入力の境界ケースを検証する。

## 5. リリース
- 環境変数と鍵管理を確認する。
- レート制御値を環境別に定義する。
- 初期運用で失敗ログのサンプリング確認を行う。

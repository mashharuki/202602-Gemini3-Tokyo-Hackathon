# 運用・トラブルシュート

## 事前チェック
- チェーンIDとRPCエンドポイントが一致しているか。
- デプロイ鍵/権限が想定どおりか。
- MUD CLIと依存パッケージのバージョン整合が取れているか。

## よくある障害と切り分け

### Txは成功するがUIが更新しない
- インデクサ遅延を確認。
- クライアント購読先が正しいWorld/チェーンを見ているか確認。
- キャッシュ層の無効化タイミングを確認。

### 期待しないrevertが発生
- 入力値の境界条件テスト不足を疑う。
- 権限条件と状態前提（phase, owner, cooldownなど）を再検証。
- 直近のスキーマ変更で互換性が壊れていないか確認。

### ガスが急増
- 新規ループ、複数テーブル書き込み、過剰イベントを確認。
- ホットパスでのストレージアクセス回数を比較。
- 必要なら処理を分割し、複数Txへ移譲する。

## リリース後チェック
- 主要ユースケースをE2Eで再実行。
- 失敗Tx率と平均確定時間を観測。
- 同期遅延時のUIフォールバックが機能しているか確認。

## 変更レビュー時の最低出力
- 変更対象（Schema/System/Client）の一覧
- 破壊的変更の有無
- 追加したテストと未カバーケース
- ロールバック手順
